---
import Logo from "../assets/logo.svg";
import ButtonClose from "./ButtonClose.astro";
import ButtonMenu from "./ButtonMenu.astro";
import NavGroup from "./NavGroup.astro";
---

<header class="fixed z-30 w-full">
  <div class="relative flex h-16 items-center px-4">
    <div class="border-2 border-red-500">
      <ButtonMenu />
      <ButtonClose />
      <NavGroup />
    </div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
      <Logo />
    </div>
  </div>
</header>

<script>
  const menu = document.getElementById("menu") as HTMLUListElement;
  const iconBurger = document.getElementById(
    "icon-burger",
  ) as HTMLButtonElement;
  const iconClose = document.getElementById("icon-close") as HTMLButtonElement;

  function openMenu() {
    menu.classList.remove("hidden");
    menu.classList.add("flex");
    iconBurger.classList.add("hidden");
    iconClose.classList.remove("hidden");
  }
  function closeMenu() {
    menu.classList.add("hidden");
    menu.classList.remove("flex");
    iconBurger.classList.remove("hidden");
    iconClose.classList.add("hidden");
  }

  iconBurger.addEventListener("click", openMenu);
  iconClose.addEventListener("click", closeMenu);

  document.addEventListener("click", (e) => {
    const target = e.target as Node;
    const isClickInside = iconBurger.contains(target) || menu.contains(target);
    if (!isClickInside && menu.classList.contains("open")) {
      menu.classList.remove("open");
      menu.classList.add("hidden");
      iconBurger.setAttribute("aria-expanded", "false");
    }
  });
</script>
